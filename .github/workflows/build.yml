  linux-arm64:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Enable QEMU for ARM64
        run: |
          sudo apt update
          sudo apt install -y qemu binfmt-support qemu-user-static

      - name: Build ARM64 Binary in Container
        run: |
          docker run --rm --platform linux/arm64 \
            -v $(pwd):/src -w /src arm64v8/debian:bullseye bash -c "
              apt update && apt install -y python3 python3-pip && \
              pip3 install pyinstaller && \
              pyinstaller --onefile --distpath ./bin --name NetCalc NetCalc.py && \
              file ./bin/NetCalc
            "

      - name: Check Binary Architecture
        run: file ./bin/NetCalc

      - name: Upload ARM64 Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: binary-linux-arm64
          path: ./bin/*
